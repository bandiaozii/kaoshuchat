(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0945e606"],{"08e5":function(t,e,i){},1237:function(t,e,i){},"2dea":function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container"},[i("div",{staticClass:"toolbar"},[i("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:t.clickAdd}},[t._v("添加关键词")])],1),i("el-table",{attrs:{data:t.dataList,stripe:"",size:"medium","header-cell-class-name":"bg-gray"}},[i("el-table-column",{attrs:{prop:"weight",label:"权重",width:"100"}}),i("el-table-column",{attrs:{prop:"keyword",label:"关键词",width:"400"}}),i("el-table-column",{attrs:{label:"匹配方式",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[1===e.row.is_hit?i("span",[t._v("精准匹配")]):i("span",[t._v("包含关键词")])]}}])}),i("el-table-column",{attrs:{label:"回复类型",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return["text"===e.row.type?i("span",[t._v("文本")]):t._e(),"image"===e.row.type?i("span",[t._v("图片")]):t._e()]}}])}),i("el-table-column",{attrs:{prop:"state",label:"启用",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(i){return t.setState(e.row.id,i)}},model:{value:e.row.state,callback:function(i){t.$set(e.row,"state",i)},expression:"scope.row.state"}})]}}])}),i("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button-group",[i("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-edit"},nativeOn:{click:function(i){return i.preventDefault(),t.clickEdit(e.row.id)}}},[t._v("编辑 ")]),i("el-button",{attrs:{type:"text text-danger",size:"mini",icon:"el-icon-delete"},nativeOn:{click:function(i){return i.preventDefault(),t.doDel(e.row.id)}}},[t._v("删除")])],1)]}}])})],1),i("el-pagination",{attrs:{"current-page":t.page,"page-size":t.pagesize,layout:"total, prev, pager, next",total:t.dataTotal},on:{"current-change":t.pageChange}}),t.form?i("div",[i("el-dialog",{attrs:{"custom-class":"my-dialog",title:t.formTitle,width:"800px",visible:!0,"close-on-click-modal":!1,"before-close":t.formClose}},[i("el-form",{ref:"form",attrs:{model:t.form,rules:t.formRules,"label-width":"120px"}},[i("el-form-item",{attrs:{label:"权重",prop:"weight"}},[i("el-input",{staticStyle:{width:"100px"},attrs:{placeholder:"越大越优先",size:"normal"},model:{value:t.form.weight,callback:function(e){t.$set(t.form,"weight",e)},expression:"form.weight"}})],1),i("el-form-item",{attrs:{label:"关键词",prop:"keyword"}},[i("el-input",{staticStyle:{width:"400px"},attrs:{placeholder:"关键词",size:"normal"},model:{value:t.form.keyword,callback:function(e){t.$set(t.form,"keyword",e)},expression:"form.keyword"}})],1),i("el-form-item",{attrs:{label:"匹配方式",prop:"is_hit"}},[i("el-radio-group",{model:{value:t.form["is_hit"],callback:function(e){t.$set(t.form,"is_hit",e)},expression:"form['is_hit']"}},[i("el-radio",{attrs:{label:1,size:"mini"}},[t._v("精准匹配")]),i("el-radio",{attrs:{label:0,size:"mini"}},[t._v("包含关键词")])],1)],1),i("el-form-item",{attrs:{label:"回复内容"}},[i("replyEditor",{ref:"replyEditor",attrs:{type:t.form.type,content:t.form.content,image:t.form.image}})],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"default",icon:"el-icon-close",size:"small"},on:{click:t.formClose}},[t._v("取 消")]),i("el-button",{attrs:{type:"primary",icon:"el-icon-check",size:"small"},on:{click:t.doSubmit}},[t._v("提 交")])],1)],1)],1):t._e()],1)},r=[],a=i("da33"),n=i("4d7a"),l={components:{replyEditor:n["a"]},data:function(){return{form:null,formType:null,dataList:[],dataTotal:0,page:1,pagesize:20,formRules:{weight:[{required:!0,message:"此项必填",trigger:"blur"}],keyword:[{required:!0,message:"此项必填",trigger:"blur"}],is_hit:[{required:!0,message:"此项必填",trigger:"blur"}],content:[{required:!0,message:"此项必填",trigger:"blur"}]}}},computed:{formTitle:function(){return"add"===this.formType?"添加关键词":"编辑"}},mounted:function(){this.getList()},methods:{getList:function(){var t=this;Object(a["c"])({page:this.page,pagesize:this.pagesize}).then((function(e){t.dataList=e.data.list,t.dataTotal=e.data.count}))},pageChange:function(t){this.page=t,this.getList()},clickAdd:function(){this.formType="add",this.form={weight:100,is_hit:1}},clickEdit:function(t){var e=this;Object(a["b"])({id:t}).then((function(t){e.formType="edit",e.form=t.data}))},formClose:function(){this.form=null,this.formType=""},doSubmit:function(){var t=this;this.$refs.form.validate((function(e){if(e){var i=t.$refs["replyEditor"].getReply(),o=i.type,r=i.content,n=i.image;t.form.type=o,t.form.content=r,t.form.image=n,Object(a["f"])(t.form).then((function(e){t.getList(),t.$message.success(e.message),t.formClose()}))}else console.log("请填写必填项")}))},doDel:function(t){var e=this;this.$confirm("删除后不可回复，确定删除吗?","提示",{confirmButtonText:"确定删除",cancelButtonText:"取消",type:"warning"}).then((function(){Object(a["a"])({id:t}).then((function(t){e.getList(),e.$message.success(t.message)}))}))},setState:function(t,e){var i=this;Object(a["g"])({id:t,state:e}).then((function(t){i.getList(),i.$message.success(t.message)}))}}},s=l,c=(i("ef7e"),i("3427")),u=Object(c["a"])(s,o,r,!1,null,"146e0ea5",null);e["default"]=u.exports},"4d7a":function(t,e,i){"use strict";var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",[i("el-radio-group",{model:{value:t.form["type"],callback:function(e){t.$set(t.form,"type",e)},expression:"form['type']"}},[i("el-radio",{attrs:{label:"text",size:"mini"}},[t._v("文字")]),i("el-radio",{attrs:{label:"image",size:"mini"}},[t._v("图片")])],1)],1),"text"===t.form["type"]?i("div",[i("el-input",{staticStyle:{width:"500px"},attrs:{type:"textarea",rows:6,placeholder:"输入文字内容",size:"small"},model:{value:t.form["content"],callback:function(e){t.$set(t.form,"content",e)},expression:"form['content']"}}),i("p",[i("el-button",{attrs:{type:"text",size:"small"},on:{click:t.showLinkForm}},[t._v("插入链接")])],1)],1):t._e(),"image"===t.form["type"]?i("div",[i("el-input",{staticStyle:{width:"400px"},attrs:{type:"text",placeholder:"输入图片地址或上传图片",size:"small"},model:{value:t.form["image"],callback:function(e){t.$set(t.form,"image",e)},expression:"form['image']"}}),i("el-upload",{staticClass:"avatar-uploader",attrs:{action:"",data:{type:"image"},"http-request":t.uploadImage,"show-file-list":!1,multiple:!1}},[t.form["image"]?i("img",{staticClass:"avatar",staticStyle:{height:"100px",width:"auto"},attrs:{src:t.form["image"]}}):i("i",{staticClass:"el-icon-plus avatar-uploader-icon",staticStyle:{width:"100px",height:"100px","line-height":"100px"}})]),i("span",[t._v("10MB以内，支持bmp/png/jpeg/jpg/gif格式")])],1):t._e(),t.linkForm?i("div",[i("el-dialog",{attrs:{"custom-class":"my-dialog",title:"插入链接",width:"460px",visible:!0,"append-to-body":!0,"close-on-click-modal":!1,"before-close":t.closeLinkForm}},[i("el-form",{ref:"form",attrs:{model:t.linkForm,rules:t.linkFormRules,"label-width":"80px"}},[i("el-form-item",{attrs:{label:"标题",prop:"title"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"链接标题",size:"small"},model:{value:t.linkForm.title,callback:function(e){t.$set(t.linkForm,"title",e)},expression:"linkForm.title"}})],1),i("el-form-item",{attrs:{label:"链接",prop:"url"}},[i("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"http:// 或 https://",size:"small"},model:{value:t.linkForm.url,callback:function(e){t.$set(t.linkForm,"url",e)},expression:"linkForm.url"}})],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"default",icon:"el-icon-close",size:"small"},on:{click:t.closeLinkForm}},[t._v("取 消")]),i("el-button",{attrs:{type:"primary",icon:"el-icon-check",size:"small"},on:{click:t.sumitLinkForm}},[t._v("提 交")])],1)],1)],1):t._e()])},r=[],a=(i("7b4c"),i("91b6")),n={props:{type:{type:String,default:"text"},content:{type:String,default:""},image:{type:String,default:""}},data:function(){return{form:{type:"text",content:"",image:""},formRules:{type:[{required:!0,message:"此项必填",trigger:"blur"}],content:[{required:!0,message:"此项必填",trigger:"blur"}],image:[{required:!0,message:"此项必填",trigger:"blur"}]},linkForm:null,linkFormRules:{title:[{required:!0,message:"此项必填",trigger:"blur"}],url:[{required:!0,message:"此项必填",trigger:"blur"}]}}},watch:{type:function(){this.form.type=this.type},content:function(){this.form.content=this.content},image:function(){this.form.image=this.image}},mounted:function(){this.form.type=this.type,this.form.content=this.content,this.form.image=this.image},methods:{getReply:function(){return this.form},uploadImage:function(t){var e=this,i=new FormData;i.append("file",t.file),t.data&&i.append("data",JSON.stringify(t.data)),Object(a["a"])(i).then((function(i){e.$set(e.form,t.data.type,i.data.path),e.$message.success("上传成功")}))},showLinkForm:function(){this.linkForm={}},closeLinkForm:function(){this.linkForm=null},sumitLinkForm:function(){this.form.content+='<a href="'+this.linkForm.url+'">'+this.linkForm.title+"</a>",this.closeLinkForm()}}},l=n,s=(i("6e7c"),i("554a"),i("3427")),c=Object(s["a"])(l,o,r,!1,null,"eb20b8c4",null);e["a"]=c.exports},"554a":function(t,e,i){"use strict";i("08e5")},"6e7c":function(t,e,i){"use strict";i("af97")},"91b6":function(t,e,i){"use strict";i.d(e,"a",(function(){return r})),i.d(e,"b",(function(){return a}));var o=i("b775");function r(t){return Object(o["a"])({url:"/upload/image",method:"post",data:t})}function a(t){return Object(o["a"])({url:"/upload/pem",method:"post",data:t})}},af97:function(t,e,i){},da33:function(t,e,i){"use strict";i.d(e,"e",(function(){return r})),i.d(e,"i",(function(){return a})),i.d(e,"d",(function(){return n})),i.d(e,"h",(function(){return l})),i.d(e,"c",(function(){return s})),i.d(e,"b",(function(){return c})),i.d(e,"f",(function(){return u})),i.d(e,"a",(function(){return m})),i.d(e,"g",(function(){return p}));var o=i("b775");function r(t){return Object(o["a"])({url:"/wxmp/getWxmpSetting",method:"post",data:t})}function a(t){return Object(o["a"])({url:"/wxmp/setWxmpSetting",method:"post",data:t})}function n(t){return Object(o["a"])({url:"/wxmp/getWxmpReply",method:"post",data:t})}function l(t){return Object(o["a"])({url:"/wxmp/setWxmpReply",method:"post",data:t})}function s(t){return Object(o["a"])({url:"/wxmp/getKeywordList",method:"post",data:t})}function c(t){return Object(o["a"])({url:"/wxmp/getKeyword",method:"post",data:t})}function u(t){return Object(o["a"])({url:"/wxmp/saveKeyword",method:"post",data:t})}function m(t){return Object(o["a"])({url:"/wxmp/delKeyword",method:"post",data:t})}function p(t){return Object(o["a"])({url:"/wxmp/setKeywordState",method:"post",data:t})}},ef7e:function(t,e,i){"use strict";i("1237")}}]);