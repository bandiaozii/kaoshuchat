(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-commission-share"],{3672:function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,"uni-page-body[data-v-3ebcbe6d]{background:#f7f7f7}body.?%PAGE?%[data-v-3ebcbe6d]{background:#f7f7f7}.page[data-v-3ebcbe6d]{width:100%;height:100%;padding-bottom:%?30?%;overflow-x:hidden}.title[data-v-3ebcbe6d]{width:100%;padding:%?30?% %?30?%;font-size:%?28?%;font-weight:700}.pannel[data-v-3ebcbe6d]{width:%?690?%;margin:0 %?30?%;background:#fff;border-radius:%?20?%;padding:%?30?%;box-sizing:border-box;overflow:hidden}.pannel .textarea[data-v-3ebcbe6d]{font-size:%?24?%;color:#333;line-height:%?36?%;background:#f7f7f8;border-radius:%?20?%;padding:%?30?%;min-height:%?180?%;box-sizing:border-box}.pannel .btn-group[data-v-3ebcbe6d]{width:100%;height:%?64?%;margin:%?40?% 0 %?20?% 0;text-align:center}.pannel .btn-group uni-view[data-v-3ebcbe6d]{display:inline-block}.btn-group .btn[data-v-3ebcbe6d]{width:%?200?%;margin:0 auto;font-size:%?28?%;font-weight:500;text-align:center;height:%?64?%;line-height:%?64?%;border-radius:%?32?%;background:#04babe;color:#fff;border:1px solid #04babe;letter-spacing:1px}.btn-group .btn[data-v-3ebcbe6d]:active{opacity:.8}.btn-group .btn-next[data-v-3ebcbe6d]{margin-left:%?30?%;background:#fff;color:#04babe}.btn-group .btn-save[data-v-3ebcbe6d]{width:%?400?%;font-weight:500;color:#fff;text-align:center}.poster-list[data-v-3ebcbe6d]{width:100%;height:%?500?%;margin:%?20?% 0}.poster-list .item[data-v-3ebcbe6d]{width:%?500?%;height:%?750?%}.poster[data-v-3ebcbe6d]{width:100%;height:100%;position:relative;margin:0 auto}.poster uni-image[data-v-3ebcbe6d]{position:absolute;width:100%;height:100%}",""]),t.exports=e},"3ab6":function(t,e,a){"use strict";var i=a("4373"),n=a.n(i);n.a},4373:function(t,e,a){var i=a("3672");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("4f06").default;n("d9863c82",i,!0,{sourceMap:!1,shadowMode:!1})},5813:function(t,e,a){"use strict";a.r(e);var i=a("ac24"),n=a("c0b9");for(var r in n)["default"].indexOf(r)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(r);a("3ab6");var s=a("f0c5"),o=Object(s["a"])(n["default"],i["b"],i["c"],!1,null,"3ebcbe6d",null,!1,i["a"],void 0);e["default"]=o.exports},7723:function(t,e,a){"use strict";(function(t){a("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("ac1f"),a("5319"),a("5b81"),a("d3b7"),a("159b");var i=getApp(),n={data:function(){return{share:{},currentHaibao:0,currentText:""}},onLoad:function(){t("log","dss"," at pages/commission/share.vue:47"),this.getShare()},methods:{getShare:function(){var t=this;i.globalData.util.request({url:"/commission/getShare"}).then((function(e){t.setData({share:e.data,currentText:e.data.defaultText,currentHaibao:e.data.defaultHaibao})}))},copyText:function(){var t=this.currentText;if(!t)return!1;t+="<br>"+this.share.h5url,t=t.replaceAll("<br>","\n"),uni.setClipboardData({data:t,success:function(){i.globalData.util.message("复制成功")}})},nextText:function(){var t=this,e=this.currentText,a=this.share.textArr;if(!a||a.length<=1)return i.globalData.util.message("没有更多了"),!1;a.forEach((function(i,n){i.content==e&&(n===a.length-1?t.setData({currentText:a[0]["content"]}):t.setData({currentText:a[n+1]["content"]}))}))},swiperChange:function(t){this.setData({currentHaibao:t.detail.current})},saveToAlbum:function(){var t=uni.createCanvasContext("poster"),e=this.share.haibaoArr,a=this.currentHaibao,n=e[a],r=this.share.qrcode,s=!1,o=!1;uni.showLoading({title:"保存中"}),uni.downloadFile({url:n.bg,success:function(e){t.drawImage(e.tempFilePath,0,0,n.bg_w,n.bg_h),s=!0,uni.downloadFile({url:r,success:function(e){t.drawImage(e.tempFilePath,n.hole_x,n.hole_y,n.hole_w,n.hole_h),o=!0}})}});var c=setInterval((function(){s&&o&&(clearInterval(c),t.draw(),uni.hideLoading(),setTimeout((function(){uni.canvasToTempFilePath({canvasId:"poster",width:n.bg_w,height:n.bg_h,destWidth:n.bg_w,destHeight:n.bg_h,quality:1,fileType:"jpg",success:function(t){uni.previewImage({urls:[t.tempFilePath]}),i.globalData.util.message("请长按图片->保存到手机")}})}),300))}),500)}}};e.default=n}).call(this,a("0de9")["log"])},ac24:function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return n})),a.d(e,"a",(function(){}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"page"},[t.share.textArr&&t.share.textArr.length>0?a("v-uni-view",[a("v-uni-view",{staticClass:"title"},[t._v("分享文案")]),a("v-uni-view",{staticClass:"pannel"},[a("v-uni-view",{staticClass:"textarea"},[a("v-uni-view",{domProps:{innerHTML:t._s(t.currentText+"<br>"+t.share.h5url)}})],1),a("v-uni-view",{staticClass:"btn-group"},[a("v-uni-view",{staticClass:"btn btn-copy",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.copyText.apply(void 0,arguments)}}},[t._v("复制文案")]),t.share.textArr.length>1?a("v-uni-view",{staticClass:"btn btn-next",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.nextText.apply(void 0,arguments)}}},[t._v("换一个")]):t._e()],1)],1)],1):t._e(),t.share.haibaoArr&&t.share.haibaoArr.length>0?a("v-uni-view",[a("v-uni-view",{staticClass:"title"},[t._v("我的海报")]),a("v-uni-view",{staticClass:"pannel"},[a("v-uni-swiper",{staticClass:"poster-list",attrs:{"indicator-dots":!0,current:t.currentHaibao,circular:!0,autoplay:!1,"previous-margin":"-10rpx","next-margin":"-10rpx"},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.swiperChange.apply(void 0,arguments)}}},t._l(t.share.haibaoArr,(function(e){return a("v-uni-swiper-item",{staticClass:"item"},[a("v-uni-view",{staticClass:"poster",style:"width: "+e.bg_w*e.scale+"rpx; height: "+e.bg_h*e.scale+"rpx;"},[a("v-uni-image",{staticStyle:{width:"100%",height:"100%"},attrs:{src:e.bg}}),a("v-uni-image",{style:"left: "+e.hole_x*e.scale+"rpx; top: "+e.hole_y*e.scale+"rpx; width: "+e.hole_w*e.scale+"rpx; height:"+e.hole_h*e.scale+"rpx;",attrs:{src:t.share.qrcode}})],1)],1)})),1),a("v-uni-view",{staticClass:"btn-group",staticStyle:{"margin-top":"100rpx"}},[a("v-uni-view",{staticClass:"btn btn-save",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.saveToAlbum.apply(void 0,arguments)}}},[t._v("下载海报图片")])],1)],1)],1):t._e(),a("v-uni-canvas",{staticStyle:{display:"block",height:"3000rpx",width:"3000rpx",position:"absolute",left:"-3000rpx",top:"-3000rpx"},attrs:{canvasId:"poster"}})],1)},n=[]},c0b9:function(t,e,a){"use strict";a.r(e);var i=a("7723"),n=a.n(i);for(var r in i)["default"].indexOf(r)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(r);e["default"]=n.a}}]);